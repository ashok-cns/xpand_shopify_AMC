{%- if section.blocks.size > 0 -%}
  {%- assign sidebarEnable = section.settings.enable_sidebar -%}
  {%- assign sectionTitle = section.settings.title -%}
  {%- assign sectionCTALink = section.settings.link -%}
  {%- assign sectionCTA = section.settings.link_text -%}
  {{ 'faq-with-sidebar.css' | asset_url | stylesheet_tag }}
  <section class="section-wapper" style="background: {{ section.settings.sec_bg }}; padding-top: {{ section.settings.sec_top | append: 'px' }}; padding-bottom: {{ section.settings.sec_bottom | append: 'px' }}">
    <div class="section faq-main-container">
      {%- unless sectionTitle == blank -%}
        <h2 class="title">
          {{ sectionTitle | escape }}
        </h2>
      {%- endunless -%}
      <div class="faq-accordion">
        <!-- mobile dropdown -->
        {%- if sidebarEnable -%}
          <div class="mobile_dropdownbtn">
            <h3>
              <span>General</span>
            </h3>
          </div>
        {%- endif -%}
        <!-- Accordian container -->
        <div class="faq-accordian-container">
          {%- if sidebarEnable -%}
            <div class="sidebar">
              {%- if section.blocks.size > 1 -%}
                <div class="maintitle active" data-title="general">
                  <img src="https://cdn.shopify.com/s/files/1/1206/8416/files/5.webp" alt="General">
                  <h3 class="general">General</h3>
                </div>
              {%- endif -%}
              {%- for block in section.blocks -%}
                {%- assign blockHeading = block.settings.faq_title -%}
                {%- assign blockIcon = block.settings.image -%}
                <div class="maintitle" data-title="{{ blockHeading | handleize }}">

                  {% if blockHeading != blank and blockIcon != blank %}
                    <img src="{{ blockIcon | img_url: '150x' }}" alt="General">
                  {% else %}
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  {% endif %}
                  {%- unless blockHeading == blank -%}
                    <h3>{{ blockHeading }}</h3>
                  {%- endunless -%}
                </div>
              {%- endfor -%}
            </div>
          {%- endif -%}
          <div class="main--content">
            {%- for block in section.blocks -%}
              {%- assign blockHeading = block.settings.faq_title -%}
              {%- assign blockIcon = block.settings.image -%}
              <div class="accordion-wrapper active" data-title="{{ blockHeading | handleize }}">
                {%- unless blockHeading == blank -%}
                  <h2>{{ blockHeading }}</h2>
                {%- endunless -%}
                {%- for i in (1..20) -%}
                  {%- capture blockQues -%}title_{{ i}}{%- endcapture -%}
                  {%- capture blockAns -%}answer_{{ i}}{%- endcapture -%}
                  {%- if block.settings[blockQues] != blank and block.settings[blockAns] != blank -%}
                    <div class="item">
                      <div class="title">{{ block.settings[blockQues] }}
                        <span class="icon">
                          <img src="//cdn.shopify.com/s/files/1/1206/8416/files/up_arrow_xpand.svg?v=1711701388">
                          <img src="//cdn.shopify.com/s/files/1/1206/8416/files/down_arrow_xpand.svg?v=1711701388">
                        </span>
                      </div>
                      <div class="body">
                        {{ block.settings[blockAns] }}
                      </div>
                    </div>
                  {%- endif -%}
                {%- endfor -%}
              </div>
            {%- endfor -%}
          </div>
        </div>

        {%- if sectionCTALink != blank and sectionCTA != blank -%}
          <div class="faq-section-cta">
            <a href="{{ sectionCTALink }}" class="button">{{ sectionCTA }}</a>
          </div>
        {%- endif -%}

      </div>
    </div>
  </section>
{%- endif -%}
{% schema %}
  {
    "name": "FAQ with sidebar",
    "class": "shopify-section--faq-with-sidebar",
    "settings": [
      {
        "type": "color",
        "id": "sec_bg",
        "label": "Section background color"
      },
      {
        "type": "checkbox",
        "id": "enable_sidebar",
        "label": "Show sidebar"
      },
      {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "FAQ"
      },
      {
        "type": "url",
        "id": "link",
        "label": "Button Link"
      }, {
        "type": "text",
        "id": "link_text",
        "label": "Button Label",
        "default": "See All FAQs"
      }, {
        "type": "header",
        "content": "Spacing"
      }, {
        "type": "range",
        "id": "sec_top",
        "step": 5,
        "min": 0,
        "max": 80,
        "unit": "px",
        "default": 0,
        "label": "Padding top"
      }, {
        "type": "range",
        "id": "sec_bottom",
        "step": 5,
        "min": 0,
        "max": 80,
        "unit": "px",
        "default": 0,
        "label": "Padding bottom"
      }
    ],
    "blocks": [
      {
        "name": "Frequently Asked Question",
        "type": "content",
        "settings": [
          {
            "type": "text",
            "id": "faq_title",
            "label": "Heading"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "Icon"
          },
          {
            "type": "text",
            "id": "title_1",
            "label": "Question 1"
          },
          {
            "type": "richtext",
            "id": "answer_1",
            "label": "Answer 1"
          }, {
            "type": "text",
            "id": "title_2",
            "label": "Question 2"
          }, {
            "type": "richtext",
            "id": "answer_2",
            "label": "Answer 2"
          }, {
            "type": "text",
            "id": "title_3",
            "label": "Question 3"
          }, {
            "type": "richtext",
            "id": "answer_3",
            "label": "Answer 3"
          }, {
            "type": "text",
            "id": "title_4",
            "label": "Question 4"
          }, {
            "type": "richtext",
            "id": "answer_4",
            "label": "Answer 4"
          }, {
            "type": "text",
            "id": "title_5",
            "label": "Question 5"
          }, {
            "type": "richtext",
            "id": "answer_5",
            "label": "Answer 5"
          }, {
            "type": "text",
            "id": "title_6",
            "label": "Question 6"
          }, {
            "type": "richtext",
            "id": "answer_6",
            "label": "Answer 6"
          }, {
            "type": "text",
            "id": "title_7",
            "label": "Question 7"
          }, {
            "type": "richtext",
            "id": "answer_7",
            "label": "Answer 7"
          }, {
            "type": "text",
            "id": "title_8",
            "label": "Question 8"
          }, {
            "type": "richtext",
            "id": "answer_8",
            "label": "Answer 8"
          }, {
            "type": "text",
            "id": "title_9",
            "label": "Question 9"
          }, {
            "type": "richtext",
            "id": "answer_9",
            "label": "Answer 9"
          }, {
            "type": "text",
            "id": "title_10",
            "label": "Question 10"
          }, {
            "type": "richtext",
            "id": "answer_10",
            "label": "Answer 10"
          }, {
            "type": "text",
            "id": "title_11",
            "label": "Question 11"
          }, {
            "type": "richtext",
            "id": "answer_11",
            "label": "Answer 11"
          }, {
            "type": "text",
            "id": "title_12",
            "label": "Question 12"
          }, {
            "type": "richtext",
            "id": "answer_12",
            "label": "Answer 12"
          }, {
            "type": "text",
            "id": "title_13",
            "label": "Question 13"
          }, {
            "type": "richtext",
            "id": "answer_13",
            "label": "Answer 13"
          }, {
            "type": "text",
            "id": "title_14",
            "label": "Question 14"
          }, {
            "type": "richtext",
            "id": "answer_14",
            "label": "Answer 14"
          }, {
            "type": "text",
            "id": "title_15",
            "label": "Question 15"
          }, {
            "type": "richtext",
            "id": "answer_15",
            "label": "Answer 15"
          }, {
            "type": "text",
            "id": "title_16",
            "label": "Question 16"
          }, {
            "type": "richtext",
            "id": "answer_16",
            "label": "Answer 16"
          }, {
            "type": "text",
            "id": "title_17",
            "label": "Question 17"
          }, {
            "type": "richtext",
            "id": "answer_17",
            "label": "Answer 17"
          }, {
            "type": "text",
            "id": "title_18",
            "label": "Question 18"
          }, {
            "type": "richtext",
            "id": "answer_18",
            "label": "Answer 18"
          }, {
            "type": "text",
            "id": "title_19",
            "label": "Question 19"
          }, {
            "type": "richtext",
            "id": "answer_19",
            "label": "Answer 19"
          }, {
            "type": "text",
            "id": "title_20",
            "label": "Question 20"
          }, {
            "type": "richtext",
            "id": "answer_20",
            "label": "Answer 20"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "FAQ with sidebar",
        "category": "Store information"
      }
    ]
  }
{% endschema %}